{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = exports.getRefTarget = void 0;\n\nvar _contains = _interopRequireDefault(require(\"dom-helpers/contains\"));\n\nvar _listen = _interopRequireDefault(require(\"dom-helpers/listen\"));\n\nvar _ownerDocument = _interopRequireDefault(require(\"dom-helpers/ownerDocument\"));\n\nvar _react = require(\"react\");\n\nvar _useEventCallback = _interopRequireDefault(require(\"@restart/hooks/useEventCallback\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nconst noop = () => {};\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nconst getRefTarget = ref => ref && ('current' in ref ? ref.current : ref);\n\nexports.getRefTarget = getRefTarget;\nconst InitialTriggerEvents = {\n  click: 'mousedown',\n  mouseup: 'mousedown',\n  pointerup: 'pointerdown'\n};\n/**\n * The `useClickOutside` hook registers your callback on the document that fires\n * when a pointer event is registered outside of the provided ref or element.\n *\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\n * @param {function} onClickOutside\n * @param {object=}  options\n * @param {boolean=} options.disabled\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\n */\n\nfunction useClickOutside(ref) {\n  let onClickOutside = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n  let {\n    disabled,\n    clickTrigger = 'click'\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const preventMouseClickOutsideRef = (0, _react.useRef)(false);\n  const waitingForTrigger = (0, _react.useRef)(false);\n  const handleMouseCapture = (0, _react.useCallback)(e => {\n    const currentTarget = getRefTarget(ref);\n    (0, _warning.default)(!!currentTarget, 'ClickOutside captured a close event but does not have a ref to compare it to. ' + 'useClickOutside(), should be passed a ref that resolves to a DOM node');\n    preventMouseClickOutsideRef.current = !currentTarget || isModifiedEvent(e) || !isLeftClickEvent(e) || !!(0, _contains.default)(currentTarget, e.target) || waitingForTrigger.current;\n    waitingForTrigger.current = false;\n  }, [ref]);\n  const handleInitialMouse = (0, _useEventCallback.default)(e => {\n    const currentTarget = getRefTarget(ref);\n\n    if (currentTarget && (0, _contains.default)(currentTarget, e.target)) {\n      waitingForTrigger.current = true;\n    }\n  });\n  const handleMouse = (0, _useEventCallback.default)(e => {\n    if (!preventMouseClickOutsideRef.current) {\n      onClickOutside(e);\n    }\n  });\n  (0, _react.useEffect)(() => {\n    if (disabled || ref == null) return undefined;\n    const doc = (0, _ownerDocument.default)(getRefTarget(ref)); // Store the current event to avoid triggering handlers immediately\n    // https://github.com/facebook/react/issues/20074\n\n    let currentEvent = (doc.defaultView || window).event;\n    let removeInitialTriggerListener = null;\n\n    if (InitialTriggerEvents[clickTrigger]) {\n      removeInitialTriggerListener = (0, _listen.default)(doc, InitialTriggerEvents[clickTrigger], handleInitialMouse, true);\n    } // Use capture for this listener so it fires before React's listener, to\n    // avoid false positives in the contains() check below if the target DOM\n    // element is removed in the React mouse callback.\n\n\n    const removeMouseCaptureListener = (0, _listen.default)(doc, clickTrigger, handleMouseCapture, true);\n    const removeMouseListener = (0, _listen.default)(doc, clickTrigger, e => {\n      // skip if this event is the same as the one running when we added the handlers\n      if (e === currentEvent) {\n        currentEvent = undefined;\n        return;\n      }\n\n      handleMouse(e);\n    });\n    let mobileSafariHackListeners = [];\n\n    if ('ontouchstart' in doc.documentElement) {\n      mobileSafariHackListeners = [].slice.call(doc.body.children).map(el => (0, _listen.default)(el, 'mousemove', noop));\n    }\n\n    return () => {\n      removeInitialTriggerListener == null ? void 0 : removeInitialTriggerListener();\n      removeMouseCaptureListener();\n      removeMouseListener();\n      mobileSafariHackListeners.forEach(remove => remove());\n    };\n  }, [ref, disabled, clickTrigger, handleMouseCapture, handleInitialMouse, handleMouse]);\n}\n\nvar _default = useClickOutside;\nexports.default = _default;","map":{"version":3,"names":["exports","__esModule","default","getRefTarget","_contains","_interopRequireDefault","require","_listen","_ownerDocument","_react","_useEventCallback","_warning","obj","noop","isLeftClickEvent","event","button","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","ref","current","InitialTriggerEvents","click","mouseup","pointerup","useClickOutside","onClickOutside","disabled","clickTrigger","preventMouseClickOutsideRef","useRef","waitingForTrigger","handleMouseCapture","useCallback","e","currentTarget","target","handleInitialMouse","handleMouse","useEffect","undefined","doc","currentEvent","defaultView","window","removeInitialTriggerListener","removeMouseCaptureListener","removeMouseListener","mobileSafariHackListeners","documentElement","slice","call","body","children","map","el","forEach","remove","_default"],"sources":["C:/repos/my-app/node_modules/@restart/ui/cjs/useClickOutside.js"],"sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = exports.getRefTarget = void 0;\n\nvar _contains = _interopRequireDefault(require(\"dom-helpers/contains\"));\n\nvar _listen = _interopRequireDefault(require(\"dom-helpers/listen\"));\n\nvar _ownerDocument = _interopRequireDefault(require(\"dom-helpers/ownerDocument\"));\n\nvar _react = require(\"react\");\n\nvar _useEventCallback = _interopRequireDefault(require(\"@restart/hooks/useEventCallback\"));\n\nvar _warning = _interopRequireDefault(require(\"warning\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst noop = () => {};\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nconst getRefTarget = ref => ref && ('current' in ref ? ref.current : ref);\n\nexports.getRefTarget = getRefTarget;\nconst InitialTriggerEvents = {\n  click: 'mousedown',\n  mouseup: 'mousedown',\n  pointerup: 'pointerdown'\n};\n/**\n * The `useClickOutside` hook registers your callback on the document that fires\n * when a pointer event is registered outside of the provided ref or element.\n *\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\n * @param {function} onClickOutside\n * @param {object=}  options\n * @param {boolean=} options.disabled\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\n */\n\nfunction useClickOutside(ref, onClickOutside = noop, {\n  disabled,\n  clickTrigger = 'click'\n} = {}) {\n  const preventMouseClickOutsideRef = (0, _react.useRef)(false);\n  const waitingForTrigger = (0, _react.useRef)(false);\n  const handleMouseCapture = (0, _react.useCallback)(e => {\n    const currentTarget = getRefTarget(ref);\n    (0, _warning.default)(!!currentTarget, 'ClickOutside captured a close event but does not have a ref to compare it to. ' + 'useClickOutside(), should be passed a ref that resolves to a DOM node');\n    preventMouseClickOutsideRef.current = !currentTarget || isModifiedEvent(e) || !isLeftClickEvent(e) || !!(0, _contains.default)(currentTarget, e.target) || waitingForTrigger.current;\n    waitingForTrigger.current = false;\n  }, [ref]);\n  const handleInitialMouse = (0, _useEventCallback.default)(e => {\n    const currentTarget = getRefTarget(ref);\n\n    if (currentTarget && (0, _contains.default)(currentTarget, e.target)) {\n      waitingForTrigger.current = true;\n    }\n  });\n  const handleMouse = (0, _useEventCallback.default)(e => {\n    if (!preventMouseClickOutsideRef.current) {\n      onClickOutside(e);\n    }\n  });\n  (0, _react.useEffect)(() => {\n    if (disabled || ref == null) return undefined;\n    const doc = (0, _ownerDocument.default)(getRefTarget(ref)); // Store the current event to avoid triggering handlers immediately\n    // https://github.com/facebook/react/issues/20074\n\n    let currentEvent = (doc.defaultView || window).event;\n    let removeInitialTriggerListener = null;\n\n    if (InitialTriggerEvents[clickTrigger]) {\n      removeInitialTriggerListener = (0, _listen.default)(doc, InitialTriggerEvents[clickTrigger], handleInitialMouse, true);\n    } // Use capture for this listener so it fires before React's listener, to\n    // avoid false positives in the contains() check below if the target DOM\n    // element is removed in the React mouse callback.\n\n\n    const removeMouseCaptureListener = (0, _listen.default)(doc, clickTrigger, handleMouseCapture, true);\n    const removeMouseListener = (0, _listen.default)(doc, clickTrigger, e => {\n      // skip if this event is the same as the one running when we added the handlers\n      if (e === currentEvent) {\n        currentEvent = undefined;\n        return;\n      }\n\n      handleMouse(e);\n    });\n    let mobileSafariHackListeners = [];\n\n    if ('ontouchstart' in doc.documentElement) {\n      mobileSafariHackListeners = [].slice.call(doc.body.children).map(el => (0, _listen.default)(el, 'mousemove', noop));\n    }\n\n    return () => {\n      removeInitialTriggerListener == null ? void 0 : removeInitialTriggerListener();\n      removeMouseCaptureListener();\n      removeMouseListener();\n      mobileSafariHackListeners.forEach(remove => remove());\n    };\n  }, [ref, disabled, clickTrigger, handleMouseCapture, handleInitialMouse, handleMouse]);\n}\n\nvar _default = useClickOutside;\nexports.default = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}