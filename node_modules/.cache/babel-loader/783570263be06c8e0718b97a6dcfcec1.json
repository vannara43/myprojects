{"ast":null,"code":"import _asyncToGenerator from\"C:/repos/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/repos/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\repos\\\\my-app\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{Fragment,useEffect,useState}from'react';import EditTodo from'./EditTodo';import{Table}from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ListTodos(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];//delete function to delete tasks\nvar deleteTodo=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:5000/todos/\".concat(id),{method:\"DELETE\"});case 3:response=_context.sent;false&&console.log(response,\"no reponse\");_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 10:setTodos(todos.filter(function(todo){return todo.data_id!==id;}));// window.location = window.location.pathname\ncase 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function deleteTodo(_x){return _ref.apply(this,arguments);};}();//get function to retrieve tasks\nvar getTodos=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,jsonData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"https://mysitedatabase.herokuapp.com/todos\");case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:jsonData=_context2.sent;setTodos(jsonData);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function getTodos(){return _ref2.apply(this,arguments);};}();useEffect(function(){getTodos();},[]);console.log(todos);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{children:\"ListTodos\"}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,responsive:true,hover:true,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:todo.data_id}),/*#__PURE__*/_jsx(\"td\",{children:todo.description}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(EditTodo,{todo:todo})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return deleteTodo(todo.data_id);},children:\"Delete\"})})]},todo.data_id);})})]})]});}export default ListTodos;","map":{"version":3,"names":["React","Fragment","useEffect","useState","EditTodo","Table","ListTodos","todos","setTodos","deleteTodo","id","fetch","method","response","console","log","error","message","filter","todo","data_id","getTodos","json","jsonData","map","description"],"sources":["C:/repos/my-app/src/components/todolistv2/ListTodos.js"],"sourcesContent":["import React, { Fragment, useEffect,useState } from 'react'\r\nimport EditTodo from './EditTodo';\r\nimport { Table } from 'react-bootstrap'\r\n\r\nfunction ListTodos() {\r\n\r\n    const [todos, setTodos] = useState([]);\r\n\r\n    //delete function to delete tasks\r\n    const deleteTodo = async (id) => {\r\n        try {\r\n            const response = await fetch(`http://localhost:5000/todos/${id}`, {\r\n                method: \"DELETE\"\r\n            })\r\n            false && console.log(response, \"no reponse\");\r\n        } catch (error) {\r\n            console.error(error.message)\r\n        }\r\n        setTodos(todos.filter(todo => todo.data_id !== id));\r\n        // window.location = window.location.pathname\r\n    }\r\n    \r\n    //get function to retrieve tasks\r\n     const getTodos = async () => {\r\n         try {\r\n            const response = await fetch(\"https://mysitedatabase.herokuapp.com/todos\");\r\n            // const response = await fetch(\"http://www.localhost:5000/todos\");\r\n            const jsonData = await response.json();\r\n            setTodos(jsonData);\r\n        } catch (error) {\r\n             console.error(error.message);\r\n         } \r\n     }\r\n    \r\n\r\n     useEffect(() => {\r\n      getTodos();\r\n    }, [])\r\n\r\n    console.log(todos)\r\n    \r\n  return (\r\n      <Fragment>\r\n    <div>ListTodos</div>\r\n\r\n    <Table striped bordered responsive hover>\r\n        <thead>\r\n            <tr>\r\n                <th>#</th>\r\n                <th>Description</th>\r\n                <th>Edit</th>\r\n                <th>Delete</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {todos.map(todo => (\r\n                <tr key={todo.data_id}>\r\n                <td>{todo.data_id}</td>\r\n                <td>{todo.description}</td>\r\n                <td><EditTodo todo={todo}/></td>\r\n                <td><button className='btn btn-danger' onClick={()=>deleteTodo(todo.data_id)}>Delete</button></td>\r\n            </tr>\r\n            ))}\r\n            \r\n        </tbody>\r\n    </Table>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ListTodos"],"mappings":"yTAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAoCC,QAApC,KAAoD,OAApD,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,OAASC,KAAT,KAAsB,iBAAtB,C,wFAEA,QAASC,CAAAA,SAAT,EAAqB,CAEjB,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eAEA;AACA,GAAMC,CAAAA,UAAU,0FAAG,iBAAOC,EAAP,qKAEYC,CAAAA,KAAK,uCAAgCD,EAAhC,EAAsC,CAC9DE,MAAM,CAAE,QADsD,CAAtC,CAFjB,QAELC,QAFK,eAKX,OAASC,OAAO,CAACC,GAAR,CAAYF,QAAZ,CAAsB,YAAtB,CAAT,CALW,+EAOXC,OAAO,CAACE,KAAR,CAAc,YAAMC,OAApB,EAPW,QASfT,QAAQ,CAACD,KAAK,CAACW,MAAN,CAAa,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,OAAL,GAAiBV,EAArB,EAAjB,CAAD,CAAR,CACA;AAVe,oEAAH,kBAAVD,CAAAA,UAAU,4CAAhB,CAaA;AACC,GAAMY,CAAAA,QAAQ,2FAAG,sMAEaV,CAAAA,KAAK,CAAC,4CAAD,CAFlB,QAEJE,QAFI,uCAIaA,CAAAA,QAAQ,CAACS,IAAT,EAJb,QAIJC,QAJI,gBAKVf,QAAQ,CAACe,QAAD,CAAR,CALU,qFAOTT,OAAO,CAACE,KAAR,CAAc,aAAMC,OAApB,EAPS,uEAAH,kBAARI,CAAAA,QAAQ,2CAAd,CAYAnB,SAAS,CAAC,UAAM,CACfmB,QAAQ,GACT,CAFS,CAEP,EAFO,CAAT,CAIDP,OAAO,CAACC,GAAR,CAAYR,KAAZ,EAEF,mBACI,MAAC,QAAD,yBACF,kCADE,cAGF,MAAC,KAAD,EAAO,OAAO,KAAd,CAAe,QAAQ,KAAvB,CAAwB,UAAU,KAAlC,CAAmC,KAAK,KAAxC,wBACI,oCACI,mCACI,yBADJ,cAEI,mCAFJ,cAGI,4BAHJ,cAII,8BAJJ,GADJ,EADJ,cASI,uBACKA,KAAK,CAACiB,GAAN,CAAU,SAAAL,IAAI,qBACX,mCACA,oBAAKA,IAAI,CAACC,OAAV,EADA,cAEA,oBAAKD,IAAI,CAACM,WAAV,EAFA,cAGA,iCAAI,KAAC,QAAD,EAAU,IAAI,CAAEN,IAAhB,EAAJ,EAHA,cAIA,iCAAI,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,OAAO,CAAE,yBAAIV,CAAAA,UAAU,CAACU,IAAI,CAACC,OAAN,CAAd,EAA5C,oBAAJ,EAJA,GAASD,IAAI,CAACC,OAAd,CADW,EAAd,CADL,EATJ,GAHE,GADJ,CA2BD,CAED,cAAed,CAAAA,SAAf"},"metadata":{},"sourceType":"module"}